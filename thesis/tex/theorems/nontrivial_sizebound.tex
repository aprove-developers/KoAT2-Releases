\begin{theorem}[SizeBounds for nontrivial SCCs]
  Let $(\UTime, \Size)$ be a complexity approximation.
  Let $\LSB$ be a local size bound.
  Let $\SCC \subseteq \RV$ be a nontrivial SCC of the RVG.
  If there is a $\beta \in \SCC$ with $\beta \notin \ScaledSum$, then we set $\USize' = \USize$ and $\LSize' = \LSize$.
  Otherwise, for all $\beta \notin \SCC$, let $\USize'(\beta) = \USize(\beta)$ and $\LSize'(\beta) = \LSize(\beta)$.
  For the definition of $(\LSize', \USize')$ for all other $\beta \in \SCC$, we will use following abbreviations.

  Let $e$ denote a bound for the highest value coming into $\SCC$.
  \[ e = \maxO{\maximum{\max(\USize(\tilde{\alpha}), -\LSize(\tilde{\alpha})) \mid \exists \alpha \in \SCC: \tilde{\alpha} \in \pre(\alpha) \setminus \SCC}} \]

  For all $t \in \TSet$ and $\square \in \braced{\sqcup, \sqcap}$ let
  \[ s^\square_t = \maximum{s^\square_{\alpha} \mid \alpha \in \SCC_t} \cdot \maximum{\abs{\pre(\alpha) \cap \SCC} \mid \alpha \in \SCC_t}. \]

  Also for $\square \in \braced{\sqcup, \sqcap}$ we define the biggest/smallest incoming value of a variable $v \in \VSet$.
  \[ \text{in}^\sqcap_{\alpha,v} = \maxO {\max \braced{\mathcal{S}^\sqcap(\tilde{t}, v') \mid \exists \tilde{t}: (\tilde{t}, v') \in \pre(\alpha) \setminus C}} \]
  \todo{In this case you get a positive lower bound. Shouldn't there be a minus in front of this thing, to make it work?}
  \[ \text{in}^\sqcup_{\alpha,v} = \maxO {\max \braced{-\mathcal{S}^\sqcup(\tilde{t}, v') \mid \exists \tilde{t}: (\tilde{t}, v') \in \pre(\alpha) \setminus C}} \]

  Furthermore we define for $\square \in \braced{\sqcup, \sqcap}$ the biggest/smallest incoming value of a result variable $\alpha \in \RV$.
  \[ \text{in}^\sqcap_\alpha = \sum_{v \in P_\alpha^\sqcap \setminus \VSet_\alpha} \text{in}^\sqcap_{\alpha,v} + \sum_{v \in N_\alpha^\sqcap \setminus \VSet_\alpha} \text{in}^\sqcup_{\alpha,v} \]
  \[ \text{in}^\sqcup_\alpha = \sum_{v \in P_\alpha^\sqcup \setminus \VSet_\alpha} \text{in}^\sqcup_{\alpha,v} + \sum_{v \in N_\alpha^\sqcup \setminus \VSet_\alpha} \text{in}^\sqcap_{\alpha,v} \]
  
  \[ \text{in}^\sqcap_t = \max \braced{\maxO{e^{\sqcap}_\alpha} + \text{in}^\sqcap_\alpha \mid \alpha \in \SCC_t }. \]
  \[ \text{in}^\sqcup_t = \max \braced{\maxO{-e^{\sqcup}_\alpha} + \text{in}^\sqcup_\alpha \mid \alpha \in \SCC_t }. \]

  With these definitions we define $(\LSize', \USize')$ for all other $\beta \in \SCC$ and $\square \in \braced{\sqcup, \sqcap}$.
  \[ {\mathcal{S}^\sqcap}'(\beta) =
  \prod_{t \in \TSet} (s^\sqcap_t)^{\UTime(t)} \cdot \left( e + 
  \sum_{t \in \TSet} \left( \UTime(t) \cdot \text{in}^\sqcap_t \right) \right)
  \]
  \[ {\mathcal{S}^\sqcup}'(\beta) = (-1) \cdot \left(
  \prod_{t \in \TSet} (s^\sqcup_t)^{\UTime(t)} \cdot \left( e + 
  \sum_{t \in \TSet} \left( \UTime(t) \cdot \text{in}^\sqcup_t \right) \right)
  \right)
  \]
  Then, $\mathit{SizeBounds}(\UTime, \Size, \SCC) = (\LSize', \USize')$ is also a size approximation. 
\end{theorem}
