\begin{figure}
  \centering
  \begin{minipage}[b]{0.3\linewidth}
    \begin{algorithmic}[1]
    \State Ask user for $\lambda$
    \If {$\lambda > 0$}
      \State $y \coloneqq 1$
      \State $z \coloneqq \lambda$
      \While {$x > 0$}
        \State $x \coloneqq x - 1$
        \State $y \coloneqq z \cdot y$
        \State $f(z)$
      \EndWhile
    \EndIf
    \end{algorithmic}
  \end{minipage}
  \begin{minipage}[b]{0.6\linewidth}
  \begin{tikzpicture}[->,>=stealth',auto,node distance=4cm,
      thick,
      main node/.style={circle,draw,font=\sffamily\Large\bfseries},
      aligned edge/.style={align=left}]
    
    \node[main node] (0) {$\location_0$};
    \node[main node] (1) [right of=0] {$\location_1$};
    \node[main node] (2) [right of=1] {$\location_2$};
    
    \path[every node/.style={font=\sffamily\small}]
    (0) edge[aligned edge] node[below=0.2cm] {$t_0$} node[above=0.2cm] {$\update(x) = x$\\$\update(y) = 1$\\$\update(z) = \tvar$\\$\guard = \braced{\tvar > 0}$} (1)
    (1) edge[aligned edge, loop above] node[above left=0.2cm] {$t_1$} node[above right=0.2cm] {$\update(x) = x - 1$\\$\update(y) = z \cdot y$\\$\update(z) = z$\\$\guard = \braced{x > 0}$\\$\cost(t_1) = z$} (1)
    (1) edge[aligned edge] node[below=0.2cm] {$t_2$} node[above=0.2cm] {$\update = \emph{id}$} (2)
    ;
  \end{tikzpicture}
  \end{minipage}
\caption{Code snippet and a corresponding program graph}
  \label{fig:example_program}
\end{figure}
