USE_OCAMLFIND = true

MENHIR_ENABLED = true

NATIVE_ENABLED = true
BYTE_ENABLED = true

OCAMLPACKS[] =
    batteries

OCAMLINCLUDES[] =
    ../poly
    ../constraints

OCAML_LIBS[] =
    ../poly/poly
    ../constraints/constraints

GEN_FILES[] =
    PolynomialParser.ml
    PolynomialParser.mli
    PolynomialLexer.ml
    PolynomialConstraintsAtomParser.ml
    PolynomialConstraintsAtomParser.mli
    PolynomialConstraintsAtomLexer.ml
    
OCamlGeneratedFiles($(GEN_FILES))

FILES[] =
    PolynomialParser
    PolynomialLexer
    PolynomialConstraintsAtomParser
    PolynomialConstraintsAtomLexer
LIB = parser

.DEFAULT: $(OCamlLibrary $(LIB), $(FILES))

clean:
  rm -f \
     *.omc \
     $(filter-proper-targets $(glob $(addsuffix .*, $(FILES)))) \
     $(LIB).a $(LIB).cmxa $(LIB).cma \
     $(GEN_FILES) \
     *~
