\begin{center}
  \begin{tikzpicture}[program]
    \node[show on=<4->, highlight on=<4>, highlight on=<12-13>, label=below:{\nodeshow{6-7}{x-y}}] (0) {$\location_0$};
    \node[highlight on=<8>, highlight on=<11-13>, label=below:{\nodeshow{6-}{\textcolor<7-8>{blue}{x-y}}}, right of=0] (1) {\alt<1>{$\location_0$}{$\location_{\textcolor<2>{blue}{1}}$}};
    \node[highlight on=<8>, label=below:{\nodeshow{6-}{\textcolor<8>{blue}{x-y}}}, right of=1] (2) {\alt<1>{$\location_1$}{$\location_{\textcolor<2>{blue}{2}}$}};

    \path[transitions]
    (0) edge[show on=<4->, highlight on=<4>, highlight on=<9>, highlight on=<12-13>] node[above] {$t_0$} node[below] {$x \coloneqq x$\\$y \coloneqq y$} (1)
    (1) edge[show on=<5->, highlight on=<5>, highlight on=<10>, highlight on=<13>, loop above] node[above left] {$t_1$} node[above right=-0.5cm and 0.2cm] {$if(x<10)$\\\textcolor<7>{blue}{$x \coloneqq x+1$}\\$y \coloneqq y$} (1)
    (1) edge[highlight on=<8>] node[above] {\alt<1-2>{$t_0$}{$t_{\textcolor<3>{blue}{2}}$}} node[below] {\nodeshow{5-}{\textcolor<5>{blue}{$if(x \geq 10)$}}\\$x \coloneqq x$\\$y \coloneqq y$} (2)
    (2) edge[highlight on=<8>, loop above] node[above left] {\alt<1-2>{$t_1$}{$t_{\textcolor<3>{blue}{3}}$}} node[above right=-0.5cm and 0.2cm] {$if(x>y)$\\$x \coloneqq x-1$\\$y \coloneqq y$} (2)
    ;
  \end{tikzpicture}
\end{center}

\begin{align*}
  \onslide<8->{\UTime(t_3) =}&
  \onslide<9->{\textcolor<9>{blue}{\UTime(t_0)} \cdot}
  \onslide<8->{\max(0,}\textcolor<12>{blue}{\onslide<12->{\USize(t_0,}\onslide<8->{\textcolor<11>{blue}{x}}\onslide<12->{)}\onslide<8->{-}\onslide<12->{\LSize(t_0,}\onslide<8->{\textcolor<11>{blue}{y}}\onslide<12->{)}}\onslide<8->{)}\\
  \onslide<10->{+& \textcolor<10>{blue}{\UTime(t_1)} \cdot} \onslide<10->{\max(0,}\textcolor<13>{blue}{\onslide<13->{\USize(t_1,}\onslide<10->{\textcolor<11>{blue}{x}}\onslide<13->{)}\onslide<10->{-}\onslide<13->{\LSize(t_1,}\onslide<10->{\textcolor<11>{blue}{y}}\onslide<13->{)}}\onslide<10->{)}
\end{align*}
