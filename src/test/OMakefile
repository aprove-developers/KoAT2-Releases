USE_OCAMLFIND = true

OCAMLPACKS[] =
    Z3
    batteries
    ocamlgraph
    fpath
    oUnit
    ppx_deriving
    ppx_deriving.eq
    ppx_deriving.ord
    ppx_deriving.show

OCAMLINCLUDES[] =
    ../poly 
    ../constraints
    ../smt
    ../transitionsystem
    ../parser
    ../bounds
    ../preprocessors

NATIVE_ENABLED = true
BYTE_ENABLED = true

OCAML_LIBS[] =
    ../poly/poly
    ../constraints/constraints
    ../smt/smt
    ../transitionsystem/transitionsystem
    ../parser/parser
    ../bounds/bounds
    ../preprocessors/preprocessors

# Include all .ml files
FILES[] = $(removesuffix .ml, $(glob *.ml))

OCamlProgram(Test, $(FILES))

install: Test
    ./Test

clean:
  rm -f \
     *.omc \
     $(filter-proper-targets $(glob $(addsuffix .*, $(FILES)))) \
     Test Test.opt \
     *~ \
     *.log \
     *.cache
