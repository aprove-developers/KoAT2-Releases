# Program name (without extension)
PROGRAM = PolyTest

# Source files without extension. One item per line, no trailing spaces.
FILES[] =
   Tools
   Poly
   PolyTest

# We use ocamlfind
USE_OCAMLFIND = true
# All ocamlfind packages that we use
OCAMLPACKS[] =
   Z3
# We need to tell omake that we want camlp4 preprocessing
#OCAMLFINDFLAGS = -syntax camlp4o

# We need to tell OMake that these files need to be created
# before it attempts to run ocamldep.
# (OMake knows that ocamllex and ocamlyacc should be used)
# OCamlGeneratedFiles(lexer.ml parser.mli parser.ml)

# Compile into an executable
OCamlProgram($(PROGRAM), $(FILES))

BYTE_ENABLED = true

# Default target: compile into bytecode or native code, or both
.DEFAULT: $(PROGRAM).run

# Cleanup
.PHONY: clean
clean:
  rm -f \
     $(filter-proper-targets $(glob $(addsuffix .*, $(FILES)))) \
     $(PROGRAM).run $(PROGRAM).opt
